TODOs:
- stage_set_ref, stage or component? need more consistency
- delete Decomposer, Recomposer, and Clone. Cleanup the ip and ip_error structs
